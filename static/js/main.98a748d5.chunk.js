(this["webpackJsonpcrypto-wallet"]=this["webpackJsonpcrypto-wallet"]||[]).push([[0],{180:function(t,e,n){},353:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),a=n(21),o=n.n(a),s=(n(180),n(78)),i=n(23),u=(n(181),n(52)),l=n.n(u),j=n(80),b=n(172),h=n(69),O=n(47),f=n(173),p=function(t){return Object(f.a)(new Set(t.map((function(t){return t.currency})))).reduce((function(e,n){return Object(O.a)(Object(O.a)({},e),{},Object(h.a)({},n,t.filter((function(t){return t.currency===n}))))}),{})},d=function(){var t=Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{CAD_BTC:1716e-8,BTC_CAD:58257.33,CAD_ETH:.000233186952759646,ETH_CAD:4288.4,USD_BTC:2166e-8,BTC_USD:46164.68,USD_ETH:.000294264779448547,ETH_USD:3398.3,BTC_ETH:13.585110718652357,ETH_BTC:.07361,CAD_USD:.79,USD_CAD:1.26});case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(j.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://shakepay.github.io/programming-exercise/web/transaction_history.json");case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.abrupt("return",p(n));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),m={CAD:{name:"Dollar",iconUrl:"https://img.icons8.com/external-those-icons-lineal-color-those-icons/24/000000/external-dollar-money-currency-those-icons-lineal-color-those-icons-7.png"},BTC:{name:"Bitcoin",iconUrl:"https://img.icons8.com/office/16/000000/bitcoin.png"},ETH:{name:"Ethereum",iconUrl:"https://img.icons8.com/color/48/000000/ethereum.png"}},y=function(t){return m[t].iconUrl},g=n(12),C={loading:!0,error:!1,balances:{},total:0,transactions:{},rates:{}},v="ACTION_POPULATE_STORE",T=function(t,e){switch(e.type){case v:var n=e.payload,c=n.transactions,r=n.rates,a=Object.keys(c).reduce((function(t,e){return Object(O.a)(Object(O.a)({},t),{},Object(h.a)({},e,function(t){return t.filter((function(t){return"credit"===t.direction})).reduce((function(t,e){return t+e.amount}),0)-t.filter((function(t){return"debit"===t.direction})).reduce((function(t,e){return t+e.amount}),0)}(c[e])))}),{}),o=Object.keys(a).reduce((function(t,e){return t+function(t,e,n){return"CAD"===t?e:n["".concat(t,"_CAD")]?e*n["".concat(t,"_CAD")]:0}(e,a[e],r)}),0);return Object(O.a)(Object(O.a)({},t),{},{transactions:c,balances:a,total:o,rates:r,loading:!1});default:return Object(O.a)({},C)}},D=Object(c.createContext)(),w=function(t){var e=t.children,n=Object(c.useReducer)(T,C),r=Object(b.a)(n,2),a=r[0],o=r[1];return Object(c.useEffect)((function(){function t(){return(t=Object(j.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x();case 3:return e=t.sent,t.next=6,d();case 6:n=t.sent,o({type:v,payload:{transactions:e,rates:n}}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(g.jsx)(D.Provider,{value:{state:a,dispatch:o},children:e})},_=n(357),k=n(355),A=n(356),B=n(104),S=n.n(B),E=_.a.Title,U=function(){var t=Object(c.useContext)(D).state,e=Object(i.f)(),n=t.loading,r=t.total,a=t.balances;return Object(g.jsx)(g.Fragment,{children:!n&&Object(g.jsxs)("div",{style:{padding:"10px"},children:[Object(g.jsxs)(E,{type:"success",style:{textAlign:"center"},children:["$",r]}),Object(g.jsx)(k.a,{}),Object(g.jsx)(A.b,{itemLayout:"horizontal",dataSource:Object.keys(a),renderItem:function(t){return Object(g.jsx)(A.b.Item,{extra:a[t],onClick:function(){return e.push("/wallet?curr=".concat(t))},children:Object(g.jsx)(A.b.Item.Meta,{avatar:Object(g.jsx)(S.a,{src:y(t)}),title:t})})}})]})})},I=n(358),H=n(168),F=n.n(H);var L=function(){return new URLSearchParams(Object(i.g)().search)},P=function(){var t,e=L(),n=Object(i.f)(),r=e.get("curr"),a=Object(c.useContext)(D).state,o=a.balances,s=a.transactions;return console.log(s[r]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F.a,{children:(t=r,m[t].name)}),Object(g.jsx)(I.a,{type:"link",onClick:function(){return n.goBack()},children:"Go Back"}),Object(g.jsxs)("h3",{children:["Balance - ",o[r]]}),Object(g.jsx)(k.a,{}),Object(g.jsx)(A.b,{itemLayout:"horizontal",dataSource:s[r],renderItem:function(t){return Object(g.jsx)(A.b.Item,{extra:t.amount,children:Object(g.jsx)(A.b.Item.Meta,{avatar:Object(g.jsx)(S.a,{src:y(r)}),title:t.type})})}})]})};var M=function(){return Object(g.jsx)(s.a,{basename:"/crypto-wallet",children:Object(g.jsx)(w,{children:Object(g.jsxs)(i.c,{children:[Object(g.jsx)(i.a,{path:"/",exact:!0,children:Object(g.jsx)(U,{})}),Object(g.jsx)(i.a,{path:"/wallet",children:Object(g.jsx)(P,{})}),Object(g.jsx)(i.a,{path:"*",children:"404"})]})})})},R=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,359)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),a(t),o(t)}))};o.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(M,{})}),document.getElementById("root")),R()}},[[353,1,2]]]);
//# sourceMappingURL=main.98a748d5.chunk.js.map